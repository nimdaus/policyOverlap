<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Entra CA Policy Visualizer</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/cytoscape/3.23.0/cytoscape.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/dagre/0.8.5/dagre.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/cytoscape-dagre@2.5.0/cytoscape-dagre.min.js"></script>
    <style>
        #cy {
            width: 100%;
            height: 80vh;
            border: 1px solid #ccc;
            background-color: #f9fafb;
        }
    </style>
</head>
<body class="bg-gray-100 font-sans">
    <nav class="bg-white shadow p-4 flex justify-between items-center">
        <h1 class="text-xl font-bold text-gray-800">Entra CA Policy Visualizer</h1>
        <div class="flex items-center space-x-4">
            <span class="text-sm text-gray-600">Logged in as: {{ user.name }}</span>
            <a href="/logout" class="text-sm text-red-500 hover:underline">Logout</a>
        </div>
    </nav>

    <div class="container mx-auto p-4">
        <div class="bg-white rounded shadow p-4 mb-4">
            <h2 class="text-lg font-semibold mb-2">What-If Simulator</h2>
            <div class="flex space-x-2 relative">
                <input type="text" id="user-search" placeholder="Search for a user..." class="border rounded p-2 flex-grow" autocomplete="off">
                <div id="search-results" class="absolute top-full left-0 w-full bg-white border rounded shadow mt-1 hidden z-10"></div>
            </div>
            <div id="selected-user" class="mt-2 text-sm text-gray-700 hidden">
                Selected: <span id="user-name" class="font-bold"></span>
                <button id="clear-selection" class="ml-2 text-blue-500 hover:underline">Clear</button>
            </div>
        </div>

        <div class="bg-white rounded shadow p-4">
            <div id="cy"></div>
        </div>
    </div>

    <script src="/static/js/viz.js"></script>
</body>
</html>
